{
    "$schema": "../dynamic-compose-schema.json",
    "services": [
        {
            "name": "nextcloud",
            "image": "nextcloud:31.0.7",
            "internalPort": 80,
            "isMain": true,
            "volumes": [
                {
                    "hostPath": "${APP_DATA_DIR}/data/nextcloud",
                    "containerPath": "/var/www/html"
                }
            ],
            "environment": {
                "MARIADB_DB": "database",
                "MARIADB_USER": "nextcloud",
                "MARIADB_PASSWORD": "${NEXTCLOUD_DB_PASSWORD}",
                "MARIADB_HOST": "nextcloud-db",
                "NEXTCLOUD_ADMIN_USER": "${NEXTCLOUD_ADMIN_USER}",
                "NEXTCLOUD_ADMIN_PASSWORD": "${NEXTCLOUD_ADMIN_PASSWORD}",
                "NEXTCLOUD_TRUSTED_DOMAINS": "${NEXTCLOUD_TRUSTED_DOMAINS}"
            }
        },
        {
            "name": "nextcloud-db",
            "image": "mariadb:11",
            "volumes": [
                {
                    "hostPath": "${APP_DATA_DIR}/data/db",
                    "containerPath": "/var/lib/mysql/data"
                }
            ],
            "environment": {
                "MARIADB_ROOT_PASSWORD": "rootpassword",
                "MARIADB_DB": "database",
                "MARIADB_USER": "nextcloud",
                "MARIADB_PASSWORD": "${NEXTCLOUD_DB_PASSWORD}"
            }
        }
    ]
}